<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta name="cryptomus" content="911c94d5" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>ShopsyPro ‚Äì Build Your Online Store in Minutes</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='assets/default_avatar.png') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
    <!-- Cloudflare Turnstile -->
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
    <style>
        :root {
            --background-start-rgb: 23, 23, 33;
            --background-end-rgb: 31, 41, 55;
            --primary-start: 96, 165, 250; /* blue-400 */
            --primary-end: 59, 130, 246; /* blue-600 */
            --secondary-start: 107, 114, 128; /* gray-500 */
            --secondary-end: 75, 85, 99; /* gray-600 */
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(to bottom, rgb(var(--background-start-rgb)), rgb(var(--background-end-rgb))) fixed;
            color: #E5E7EB; /* gray-200 */
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .font-heading {
            font-family: 'Poppins', sans-serif;
        }

        main {
            flex: 1;
        }

        .card {
            background-color: rgba(31, 41, 55, 0.5); /* gray-800 with opacity */
            border: 1px solid rgba(75, 85, 99, 0.5); /* gray-600 with opacity */
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease-in-out;
            overflow: hidden;
        }

        .card:hover {
            border-color: rgba(96, 165, 250, 0.5); /* blue-400 with opacity */
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2), 0 8px 10px -6px rgba(0, 0, 0, 0.2);
        }

        .glass-effect {
            background: rgba(23, 23, 33, 0.6);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem; /* rounded-lg */
            transition: all 0.3s ease;
            border: none;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1), 0 1px 2px rgba(0,0,0,0.06);
            text-align: center;
            cursor: pointer;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1), 0 1px 2px rgba(0,0,0,0.06);
        }

        .btn-primary {
            color: white;
            background: linear-gradient(135deg, #3B82F6 0%, #1D4ED8 100%);
            border: 1px solid rgba(59, 130, 246, 0.3);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }

        .btn-primary:hover:not(:disabled) {
            background: linear-gradient(135deg, #2563EB 0%, #1E40AF 100%);
            transform: translateY(-1px);
            box-shadow:
                    0 10px 25px -3px rgba(59, 130, 246, 0.3),
                    0 4px 6px -2px rgba(59, 130, 246, 0.1);
        }

        .btn-primary:active:not(:disabled) {
            transform: translateY(0);
        }

        .btn-secondary {
            background-color: rgba(55, 65, 81, 0.8); /* gray-700 with opacity */
            color: #D1D5DB; /* gray-300 */
            border: 1px solid rgba(75, 85, 99, 0.8); /* gray-600 with opacity */
        }

        .btn-secondary:hover:not(:disabled) {
            background-color: rgba(75, 85, 99, 1); /* gray-600 */
            color: white;
            transform: translateY(-2px);
        }

        .form-input {
            width: 100%;
            padding: 0.875rem 1rem;
            border: 1px solid rgba(75, 85, 99, 0.4);
            border-radius: 0.75rem;
            background-color: rgba(31, 41, 55, 0.6);
            color: #E5E7EB;
            font-size: 0.875rem;
            transition: all 0.2s ease;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            position: relative;
        }

        .form-input:focus {
            outline: none;
            border-color: #3B82F6;
            box-shadow:
                    0 0 0 3px rgba(59, 130, 246, 0.1),
                    0 4px 6px -1px rgba(0, 0, 0, 0.1);
            background-color: rgba(31, 41, 55, 0.8);
        }

        .form-input::placeholder {
            color: #9CA3AF;
        }

        .form-input:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.75);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
        }

        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
            animation: modalFadeIn 0.3s ease-out;
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .modal-content {
            background: rgba(17, 24, 39, 0.95);
            border: 1px solid rgba(75, 85, 99, 0.3);
            border-radius: 1.5rem;
            padding: 2.5rem;
            max-width: 90vw;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            box-shadow:
                    0 25px 50px -12px rgba(0, 0, 0, 0.6),
                    0 0 0 1px rgba(255, 255, 255, 0.05);
            animation: contentSlideIn 0.3s ease-out;
        }

        @keyframes contentSlideIn {
            from {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        @media (min-width: 640px) {
            .modal-content {
                max-width: 480px;
                padding: 3rem;
            }
        }

        .close {
            position: absolute;
            top: 1.25rem;
            right: 1.5rem;
            font-size: 1.5rem;
            font-weight: bold;
            color: #9CA3AF;
            cursor: pointer;
            transition: all 0.2s ease;
            z-index: 10;
            width: 2rem;
            height: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.5rem;
        }

        .close:hover {
            color: #EF4444;
            background-color: rgba(239, 68, 68, 0.1);
        }

        .close:active {
            transform: scale(0.95);
        }

        .flash-message {
            padding: 1rem 1.25rem;
            border-radius: 0.75rem;
            margin-bottom: 1.5rem;
            font-size: 0.875rem;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border: 1px solid transparent;
        }

        .flash-success {
            background: rgba(16, 185, 129, 0.1);
            color: #10B981;
            border-color: rgba(16, 185, 129, 0.2);
        }

        .flash-error {
            background: rgba(239, 68, 68, 0.1);
            color: #EF4444;
            border-color: rgba(239, 68, 68, 0.2);
        }

        .checkbox {
            appearance: none;
            width: 1rem;
            height: 1rem;
            border: 2px solid rgba(75, 85, 99, 0.8);
            border-radius: 0.25rem;
            background-color: rgba(31, 41, 55, 0.8);
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
        }

        .checkbox:checked {
            background-color: #3B82F6;
            border-color: #3B82F6;
        }

        .checkbox:checked::after {
            content: '‚úì';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 0.75rem;
            font-weight: bold;
        }

        .checkbox-label {
            color: #D1D5DB;
            font-size: 0.875rem;
            cursor: pointer;
        }

        .password-toggle {
            position: absolute;
            right: 0.8rem;
            top: 45%;
            color: #9CA3AF;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 2rem;
            height: 2rem;
        }

        .password-toggle:hover {
            color: #3B82F6;
            background-color: rgba(59, 130, 246, 0.1);
        }

        .form-switch {
            text-align: center;
            margin-top: 1rem;
            color: #9CA3AF;
            font-size: 0.875rem;
        }

        .form-switch a {
            color: #3B82F6;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .form-switch a:hover {
            color: #60A5FA;
        }

        .store-message {
            padding: 1rem;
            border-radius: 0.75rem;
            margin-bottom: 1.5rem;
            font-size: 0.875rem;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border-width: 1px;
            border-style: solid;
        }

        .store-message.success {
            background: rgba(16, 185, 129, 0.15);
            color: #10B981;
            border-color: rgba(16, 185, 129, 0.3);
            box-shadow: 0 4px 6px -1px rgba(16, 185, 129, 0.1);
        }

        .store-message.error {
            background: rgba(239, 68, 68, 0.15);
            color: #EF4444;
            border-color: rgba(239, 68, 68, 0.3);
            box-shadow: 0 4px 6px -1px rgba(239, 68, 68, 0.1);
        }

        .hero-gradient {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%);
        }

        .feature-card {
            background: linear-gradient(145deg, rgba(31, 41, 55, 0.8), rgba(49, 46, 75, 0.8));
            border: 1px solid rgba(75, 85, 99, 0.5);
            border-radius: 1rem;
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            transition: all 0.3s ease-in-out;
        }

        .feature-card:hover {
            border-color: rgba(96, 165, 250, 0.5);
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2);
        }

        .pricing-card {
            background: linear-gradient(145deg, rgba(31, 41, 55, 0.8), rgba(49, 46, 75, 0.8));
            border: 1px solid rgba(75, 85, 99, 0.5);
            border-radius: 1rem;
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            transition: all 0.3s ease-in-out;
        }

        .pricing-card.featured {
            border-color: rgba(96, 165, 250, 0.5);
            box-shadow: 0 20px 25px -5px rgba(59, 130, 246, 0.2);
        }

        .pricing-card:hover {
            border-color: rgba(96, 165, 250, 0.5);
            transform: translateY(-5px);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.3);
        }

        @media (max-width: 640px) {
            .hero-content h1 {
                font-size: 2.5rem;
            }

            .btn {
                min-height: 44px;
                padding: 0.75rem 1rem;
                font-size: 1rem;
            }

            .form-input {
                font-size: 16px;
                padding: 0.75rem;
                min-height: 44px;
            }

            .card {
                margin: 0.5rem;
                padding: 1rem;
            }

            .card:hover {
                transform: none;
            }

            .feature-card:hover {
                transform: none;
            }

            .pricing-card:hover {
                transform: none;
            }
        }

        @media (max-width: 768px) {
            .hero-content h1 {
                font-size: 2rem;
            }

            .hero-content p {
                font-size: 1rem;
            }

            .btn {
                min-height: 44px;
                padding: 0.75rem 1rem;
                font-size: 1rem;
            }
        }

        @media (max-width: 1024px) {
            .hero-content h1 {
                font-size: 2.25rem;
            }
        }

        /* Enhanced smooth transitions for all interactive elements */
        * {
            transition: all 0.3s ease-in-out;
        }

        /* Smooth section transitions */
        section {
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
        }

        /* Enhanced button transitions */
        .btn {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Smooth card animations */
        .card, .feature-card, .pricing-card {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
    </style>
</head>
<body class="min-h-screen">
<header class="glass-effect sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center py-4">
            <a href="{{ url_for('dashboard.home') }}" class="text-2xl font-bold font-heading text-white tracking-tight hover:text-blue-300 transition-colors">
                ShopsyPro<span class="text-blue-400">.</span>
            </a>
            <nav class="hidden md:flex items-center space-x-8">
                <a href="#features" class="text-gray-300 hover:text-white transition-colors">Features</a>
                <a href="#pricing" class="text-gray-300 hover:text-white transition-colors">Pricing</a>
                <a href="{{ url_for('orders.track_orders') }}" class="text-gray-300 hover:text-white transition-colors">Track Orders</a>
                <button onclick="openLoginModal()" class="btn btn-secondary text-sm">
                    <i class="fas fa-sign-in-alt mr-2"></i>
                    Sign In
                </button>
                <button onclick="openSignupModal()" class="btn btn-primary text-sm">
                    <i class="fas fa-user-plus mr-2"></i>
                    Get Started
                </button>
            </nav>
            <button class="md:hidden text-gray-300 hover:text-white transition-colors" onclick="toggleMobileMenu()">
                <i class="fas fa-bars text-xl"></i>
            </button>
        </div>
    </div>

    <div id="mobileMenu" class="md:hidden hidden bg-gray-900/95 backdrop-blur-lg border-t border-gray-700/50">
        <div class="px-4 py-6 space-y-4">
            <a href="#features" class="block text-gray-300 hover:text-white transition-colors py-2">Features</a>
            <a href="#pricing" class="block text-gray-300 hover:text-white transition-colors py-2">Pricing</a>
            <a href="{{ url_for('orders.track_orders') }}" class="block text-gray-300 hover:text-white transition-colors py-2">Track Orders</a>
            <div class="pt-4 border-t border-gray-700/50 space-y-3">
                <button onclick="openLoginModal()" class="btn btn-secondary w-full justify-center">
                    <i class="fas fa-sign-in-alt mr-2"></i>
                    Sign In
                </button>
                <button onclick="openSignupModal()" class="btn btn-primary w-full justify-center">
                    <i class="fas fa-user-plus mr-2"></i>
                    Get Started
                </button>
            </div>
        </div>
    </div>
</header>

<main class="flex-grow">
    <!-- Enhanced Hero Section -->
    <section class="relative py-20 lg:py-32 overflow-hidden">
        <!-- Background Elements -->
        <div class="absolute inset-0 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900"></div>
        <div class="absolute inset-0 bg-gradient-to-r from-blue-600/10 via-transparent to-purple-600/10"></div>
        
        <!-- Animated Background Dots -->
        <div class="absolute inset-0">
            <div class="absolute top-20 left-1/4 w-2 h-2 bg-blue-400/30 rounded-full animate-pulse"></div>
            <div class="absolute top-32 right-1/3 w-1 h-1 bg-purple-400/40 rounded-full animate-pulse delay-700"></div>
            <div class="absolute bottom-1/3 left-1/3 w-1.5 h-1.5 bg-blue-300/20 rounded-full animate-pulse delay-1000"></div>
            <div class="absolute bottom-20 right-1/4 w-2 h-2 bg-purple-300/30 rounded-full animate-pulse delay-500"></div>
        </div>

        <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid lg:grid-cols-2 gap-12 items-center">
                
                <!-- Content Side -->
                <div class="text-center lg:text-left space-y-8 lg:space-y-10">
                    <!-- Main Title -->
                    <div class="space-y-6 lg:space-y-4">
                        <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold font-heading text-white leading-tight">
                            <span class="block lg:inline">Build Your</span>
                            <span class="block lg:inline">
                                <span class="relative inline-block whitespace-nowrap mb-2 sm:mb-3">
                                    <span class="bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent">
                                        Digital
                                    </span>
                                    <div class="absolute -bottom-1 sm:-bottom-2 left-0 right-0 h-0.5 sm:h-1 bg-gradient-to-r from-blue-400/50 to-purple-400/50 rounded-full"></div>
                                </span>
                                <span class="relative inline-block whitespace-nowrap mb-2 sm:mb-3 ml-2 lg:ml-1">
                                    <span class="bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent">
                                        Store
                                    </span>
                                    <div class="absolute -bottom-1 sm:-bottom-2 left-0 right-0 h-0.5 sm:h-1 bg-gradient-to-r from-blue-400/50 to-purple-400/50 rounded-full"></div>
                                </span>
                            </span>
                            <span class="block lg:inline">in Minutes</span>
                        </h1>
                        
                        <p class="text-lg sm:text-xl text-gray-300 max-w-xl sm:max-w-2xl mx-auto lg:mx-0 leading-relaxed px-4 lg:px-0 text-center lg:text-left">
                            Create, manage, and scale your online business with our all-in-one platform.
                            <span class="text-blue-300 font-medium">No coding required</span>, just pure selling power.
                        </p>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex flex-col sm:flex-row gap-4 items-center justify-center lg:justify-start">
                        <button onclick="openSignupModal()" class="group relative w-full sm:w-auto btn bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white text-lg px-8 py-4 font-semibold transition-all duration-300 hover:scale-105 hover:shadow-xl hover:shadow-blue-500/25">
                            <span class="flex items-center">
                                <i class="fas fa-rocket mr-2"></i>
                                Start Selling Now
                            </span>
                        </button>
                        <a href="#features" class="w-full sm:w-auto btn btn-secondary text-lg px-8 py-4 font-semibold border-2 border-gray-600 hover:border-blue-400 transition-all duration-300">
                            <i class="fas fa-play mr-2"></i>
                            See How It Works
                        </a>
                    </div>

                    <!-- Mobile spacing for Visit Store card -->
                    <div class="block lg:hidden h-4"></div>

                </div>

                <!-- Store Visitor Side (Responsive) -->
                <div class="flex justify-center">
                    <div class="w-full max-w-md">
                        <!-- Main Store Visitor Card -->
                        <div class="bg-slate-800/80 border border-slate-700/50 rounded-xl p-6 lg:p-8 backdrop-blur-sm shadow-2xl">
                            <div class="flex items-center mb-4 lg:mb-6">
                                <div class="w-10 h-10 lg:w-12 lg:h-12 bg-blue-500/20 rounded-xl flex items-center justify-center mr-3 lg:mr-4">
                                    <i class="fas fa-store text-blue-400 text-lg lg:text-xl"></i>
                                </div>
                                <div>
                                    <h3 class="text-lg lg:text-xl font-semibold text-white">Visit a Store</h3>
                                </div>
                            </div>
                            
                            <div class="space-y-4 lg:space-y-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Store Username</label>
                                    <input type="text"
                                           id="storeId-desktop"
                                           class="form-input store-input w-full"
                                           placeholder="Enter store username">
                                </div>
                                
                                <div class="bg-slate-700/30 rounded-lg p-4">
                                    <div class="text-xs text-gray-400 mb-1">Preview URL</div>
                                    <div id="urlPreview-desktop" class="text-sm text-blue-300 url-preview font-mono break-all">
                                        {{ current_domain }}/example
                                    </div>
                                </div>
                                
                                <button onclick="visitStore('desktop')" class="btn btn-primary w-full visit-btn visit-btn-desktop group">
                                    <i class="fas fa-external-link-alt mr-2 group-hover:translate-x-1 transition-transform"></i>
                                    Visit Store
                                </button>
                            </div>
                        </div>

                        <!-- Trust Indicators -->
                        <div class="mt-4 lg:mt-6 flex justify-center space-x-4 lg:space-x-8 text-xs text-gray-500">
                            <div class="flex items-center">
                                <i class="fas fa-shield-alt text-green-400 mr-1"></i>
                                <span class="hidden sm:inline">SSL Secured</span>
                                <span class="sm:hidden">SSL</span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-clock text-blue-400 mr-1"></i>
                                <span class="hidden sm:inline">99.9% Uptime</span>
                                <span class="sm:hidden">99.9%</span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-users text-purple-400 mr-1"></i>
                                <span class="hidden sm:inline">1000+ Stores</span>
                                <span class="sm:hidden">1000+</span>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <section id="features" class="py-20 bg-gray-900/30">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-3xl md:text-4xl font-bold font-heading text-white mb-4">
                    Everything you need to sell
                </h2>
                <p class="text-xl text-gray-300 max-w-3xl mx-auto">
                    Professional tools to build, manage, and scale your online business
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="feature-card p-6">
                    <div class="text-3xl mb-4">üõçÔ∏è</div>
                    <h3 class="text-xl font-semibold text-white mb-3">Dedicated Storefront</h3>
                    <p class="text-gray-300">
                        Get your branded subdomain (shopsy.pro/yourbrand) with a professional storefront design that showcases your products beautifully.
                    </p>
                </div>

                <div class="feature-card p-6">
                    <div class="text-3xl mb-4">üíé</div>
                    <h3 class="text-xl font-semibold text-white mb-3">30+ Cryptocurrencies</h3>
                    <p class="text-gray-300">
                        Accept payments in Bitcoin, Ethereum, USDT, and 27+ other cryptocurrencies through secure Cryptomus integration.
                    </p>
                </div>

                <div class="feature-card p-6">
                    <div class="text-3xl mb-4">üè∑Ô∏è</div>
                    <h3 class="text-xl font-semibold text-white mb-3">Unlimited Products</h3>
                    <p class="text-gray-300">
                        Add unlimited products, organize with categories, and create discount coupons. No limits on your inventory.
                    </p>
                </div>

                <div class="feature-card p-6">
                    <div class="text-3xl mb-4">üí¨</div>
                    <h3 class="text-xl font-semibold text-white mb-3">Customer Support System</h3>
                    <p class="text-gray-300">
                        Built-in ticket system allows customers to contact merchants directly for support and order inquiries.
                    </p>
                </div>

                <div class="feature-card p-6">
                    <div class="text-3xl mb-4">üìà</div>
                    <h3 class="text-xl font-semibold text-white mb-3">Order Management</h3>
                    <p class="text-gray-300">
                        Track orders, manage inventory, view analytics dashboard, and monitor your business performance in real-time.
                    </p>
                </div>

                <div class="feature-card p-6">
                    <div class="text-3xl mb-4">‚ö°Ô∏è</div>
                    <h3 class="text-xl font-semibold text-white mb-3">Mobile Optimized</h3>
                    <p class="text-gray-300">
                        Responsive design ensures your storefront looks perfect on any device. Fast loading and seamless mobile shopping experience.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <section id="pricing" class="py-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-3xl md:text-4xl font-bold font-heading text-white mb-4">
                    Simple pricing
                </h2>
                <p class="text-xl text-gray-300">
                    Everything included. No hidden fees. Cancel anytime.
                </p>
            </div>

            <div class="h-full flex items-center justify-center flex-col md:flex-row gap-8">
                <div class="pricing-card p-8">
                    <div class="text-center mb-8">
                        <h3 class="text-2xl font-bold text-white mb-2">Free</h3>
                        <p class="text-gray-400">Perfect for getting started</p>
                    </div>

                    <div class="text-center mb-8">
                        <div class="text-4xl font-bold text-white">
                            $0<span class="text-lg text-gray-400">/mo</span>
                        </div>
                        <span class="text-[10px]">(+9% transaction fee)</span>
                        <p class="text-sm text-gray-400 mt-2">No setup fees</p>
                    </div>

                    <ul class="space-y-3 mb-8">
                        <li class="flex items-center text-gray-300">
                            <i class="fas fa-check text-green-400 mr-3"></i>
                            Dedicated storefront (shopsy.pro/yourbrand)
                        </li>
                        <li class="flex items-center text-gray-300">
                            <i class="fas fa-check text-green-400 mr-3"></i>
                            Unlimited products, categories & coupons
                        </li>
                        <li class="flex items-center text-gray-300">
                            <i class="fas fa-check text-green-400 mr-3"></i>
                            Professional storefront design
                        </li>
                        <li class="flex items-center text-gray-300">
                            <i class="fas fa-check text-green-400 mr-3"></i>
                            30+ cryptocurrency payments (Bitcoin, Ethereum, USDT, etc.)
                        </li>
                        <li class="flex items-center text-gray-300">
                            <i class="fas fa-check text-green-400 mr-3"></i>
                            Customer support ticket system
                        </li>
                        <li class="flex items-center text-gray-300">
                            <i class="fas fa-check text-green-400 mr-3"></i>
                            Basic analytics dashboard
                        </li>
                    </ul>

                    <button onclick="openSignupModal()" class="btn btn-primary w-full">
                        Get Started
                    </button>
                </div>

                <div class="pricing-card featured p-8 relative">
                    <div class="absolute -top-4 left-1/2 transform -translate-x-1/2">
                            <span class="bg-blue-500 text-white px-4 py-1 rounded-full text-sm font-semibold">
                                Most Popular
                            </span>
                    </div>

                    <div class="text-center mb-8">
                        <h3 class="text-2xl font-bold text-white mb-2">Premium</h3>
                        <p class="text-gray-400">Best for growing businesses</p>
                    </div>

                    <div class="text-center mb-8">
                        <div class="text-4xl font-bold text-white">
                            $25<span class="text-lg text-gray-400">/mo</span>
                        </div>
                        <span class="text-[10px]">(+5% transaction fee)</span>
                        <p class="text-sm text-gray-400 mt-2">No setup fees</p>
                    </div>

                    <ul class="space-y-3 mb-8">
                        <li class="flex items-center text-gray-300">
                            <i class="fas fa-check text-green-400 mr-3"></i>
                            <strong>Everything in Free, plus:</strong>
                        </li>
                        <li class="flex items-center text-gray-300">
                            <i class="fas fa-check text-green-400 mr-3"></i>
                            Lower transaction fees (5% vs 9%)
                        </li>
                        <li class="flex items-center text-gray-300">
                            <i class="fas fa-check text-green-400 mr-3"></i>
                            Priority email support
                        </li>
                        <li class="flex items-center text-gray-300">
                            <i class="fas fa-clock text-blue-400 mr-3"></i>
                            Advanced analytics (coming soon)
                        </li>
                        <li class="flex items-center text-gray-300">
                            <i class="fas fa-clock text-blue-400 mr-3"></i>
                            Stripe and Paypal coming soon
                        </li>
                        <li class="flex items-center text-gray-300">
                            <i class="fas fa-check text-green-400 mr-3"></i>
                            Premium themes & customization
                        </li>
                        <li class="flex items-center text-gray-300">
                            <i class="fas fa-clock text-blue-400 mr-3"></i>
                            Telegram notifications (coming soon)
                        </li>
                    </ul>

                    <button onclick="openSignupModal()" class="btn btn-primary w-full">
                        Get Started
                    </button>
                </div>
            </div>
        </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section id="faq" class="py-20 bg-gray-900/20">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-3xl md:text-4xl font-bold font-heading text-white mb-4">
                    Frequently Asked Questions
                </h2>
                <p class="text-xl text-gray-300">
                    Everything you need to know about ShopsyPro
                </p>
            </div>

            <div class="space-y-4">
                <!-- FAQ Item 1 -->
                <div class="faq-item bg-gray-800/30 border border-gray-700/50 rounded-lg">
                    <button class="faq-question w-full text-left px-6 py-4 flex justify-between items-center hover:bg-gray-800/50 transition-colors">
                        <span class="text-lg font-semibold text-white">How do I create my first store?</span>
                        <i class="fas fa-chevron-down text-gray-400 transition-transform"></i>
                    </button>
                    <div class="faq-answer hidden px-6 pb-4">
                        <p class="text-gray-300">Sign up for an account, choose your store username, and you'll get your dedicated storefront at shopsy.pro/yourusername. Start adding products, categories, and coupons right away!</p>
                    </div>
                </div>

                <!-- FAQ Item 2 -->
                <div class="faq-item bg-gray-800/30 border border-gray-700/50 rounded-lg">
                    <button class="faq-question w-full text-left px-6 py-4 flex justify-between items-center hover:bg-gray-800/50 transition-colors">
                        <span class="text-lg font-semibold text-white">What payment methods do you support?</span>
                        <i class="fas fa-chevron-down text-gray-400 transition-transform"></i>
                    </button>
                    <div class="faq-answer hidden px-6 pb-4">
                        <p class="text-gray-300">We support 30+ cryptocurrencies including Bitcoin, Ethereum, USDT, Litecoin, and many more through our secure Cryptomus integration. Perfect for digital products and global sales.</p>
                    </div>
                </div>

                <!-- FAQ Item 3 -->
                <div class="faq-item bg-gray-800/30 border border-gray-700/50 rounded-lg">
                    <button class="faq-question w-full text-left px-6 py-4 flex justify-between items-center hover:bg-gray-800/50 transition-colors">
                        <span class="text-lg font-semibold text-white">Are there any product limits?</span>
                        <i class="fas fa-chevron-down text-gray-400 transition-transform"></i>
                    </button>
                    <div class="faq-answer hidden px-6 pb-4">
                        <p class="text-gray-300">No limits! Add unlimited products, organize them with unlimited categories, and create unlimited discount coupons. Scale your inventory as much as you need.</p>
                    </div>
                </div>

                <!-- FAQ Item 4 -->
                <div class="faq-item bg-gray-800/30 border border-gray-700/50 rounded-lg">
                    <button class="faq-question w-full text-left px-6 py-4 flex justify-between items-center hover:bg-gray-800/50 transition-colors">
                        <span class="text-lg font-semibold text-white">How do customers contact me for support?</span>
                        <i class="fas fa-chevron-down text-gray-400 transition-transform"></i>
                    </button>
                    <div class="faq-answer hidden px-6 pb-4">
                        <p class="text-gray-300">ShopsyPro includes a built-in customer support ticket system. Customers can contact you directly through your storefront, and you can manage all support requests from your dashboard.</p>
                    </div>
                </div>

                <!-- FAQ Item 5 -->
                <div class="faq-item bg-gray-800/30 border border-gray-700/50 rounded-lg">
                    <button class="faq-question w-full text-left px-6 py-4 flex justify-between items-center hover:bg-gray-800/50 transition-colors">
                        <span class="text-lg font-semibold text-white">Can customers track their orders?</span>
                        <i class="fas fa-chevron-down text-gray-400 transition-transform"></i>
                    </button>
                    <div class="faq-answer hidden px-6 pb-4">
                        <p class="text-gray-300">Yes! Customers can track their orders using our secure email verification system. They just need to enter their email address and verify their identity to see all their order details.</p>
                    </div>
                </div>

                <!-- FAQ Item 6 -->
                <div class="faq-item bg-gray-800/30 border border-gray-700/50 rounded-lg">
                    <button class="faq-question w-full text-left px-6 py-4 flex justify-between items-center hover:bg-gray-800/50 transition-colors">
                        <span class="text-lg font-semibold text-white">What's the difference between Free and Premium?</span>
                        <i class="fas fa-chevron-down text-gray-400 transition-transform"></i>
                    </button>
                    <div class="faq-answer hidden px-6 pb-4">
                        <p class="text-gray-300">Both plans include all core features. Premium offers lower transaction fees (5% vs 9%), priority email support, and early access to new features like advanced analytics and Telegram notifications.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
</main>

<footer class="bg-gradient-to-b from-gray-900/30 to-gray-900/80 border-t border-gray-700/30 py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 lg:gap-8">
            <!-- Brand Section -->
            <div class="lg:col-span-2">
                <a href="{{ url_for('dashboard.home') }}" class="inline-block">
                    <h2 class="text-3xl font-bold font-heading text-white hover:text-blue-300 transition-colors">
                        ShopsyPro<span class="text-blue-400">.</span>
                    </h2>
                </a>
                <p class="text-gray-300 mt-4 text-lg leading-relaxed max-w-md">
                    The modern e-commerce platform that empowers creators to build, manage, and scale their digital storefronts with ease.
                </p>
                <div class="mt-6 flex items-center space-x-4">
                    <div class="flex items-center text-sm text-gray-400">
                        <i class="fas fa-shield-alt text-green-400 mr-2"></i>
                        <span>Secure & Trusted</span>
                    </div>
                    <div class="flex items-center text-sm text-gray-400">
                        <i class="fas fa-bolt text-yellow-400 mr-2"></i>
                        <span>Lightning Fast</span>
                    </div>
                </div>
            </div>

            <!-- Platform Links -->
            <div>
                <h3 class="text-white font-semibold text-lg mb-6">Platform</h3>
                <ul class="space-y-4">
                    <li>
                        <a href="{{ url_for('cryptocurrencies') }}" class="text-gray-400 hover:text-white transition-colors flex items-center group">
                            <i class="fas fa-coins mr-3 text-blue-400 group-hover:text-blue-300"></i>
                            <span>Supported Cryptocurrencies</span>
                        </a>
                    </li>
                    <li>
                        <a href="{{ url_for('orders.track_orders') }}" class="text-gray-400 hover:text-white transition-colors flex items-center group">
                            <i class="fas fa-search mr-3 text-blue-400 group-hover:text-blue-300"></i>
                            <span>Track Orders</span>
                        </a>
                    </li>
                    <li>
                        <a href="{{ url_for('support.contact') }}" class="text-gray-400 hover:text-white transition-colors flex items-center group">
                            <i class="fas fa-headset mr-3 text-blue-400 group-hover:text-blue-300"></i>
                            <span>Support</span>
                        </a>
                    </li>
                </ul>
            </div>

            <!-- Legal & Resources -->
            <div>
                <h3 class="text-white font-semibold text-lg mb-6">Resources</h3>
                <ul class="space-y-4">
                    <li>
                        <a href="{{ url_for('privacy.policy') }}" class="text-gray-400 hover:text-white transition-colors flex items-center group">
                            <i class="fas fa-user-shield mr-3 text-blue-400 group-hover:text-blue-300"></i>
                            <span>Privacy Policy</span>
                        </a>
                    </li>
                    <li>
                        <a href="{{ url_for('terms.service') }}" class="text-gray-400 hover:text-white transition-colors flex items-center group">
                            <i class="fas fa-file-contract mr-3 text-blue-400 group-hover:text-blue-300"></i>
                            <span>Terms of Service</span>
                        </a>
                    </li>
                    <li>
                        <a href="#pricing" class="text-gray-400 hover:text-white transition-colors flex items-center group" onclick="document.getElementById('pricing').scrollIntoView({behavior: 'smooth'})">
                            <i class="fas fa-tags mr-3 text-blue-400 group-hover:text-blue-300"></i>
                            <span>Pricing</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Bottom Bar -->
        <div class="mt-12 pt-8 border-t border-gray-700/50">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="text-gray-500 text-sm">
                    &copy; {{ now.year }} ShopsyPro. All rights reserved. Built for creators, by creators.
                </div>
                <div class="mt-4 md:mt-0 flex items-center space-x-6">
                    <div class="text-xs text-gray-500 flex items-center">
                        <i class="fas fa-heart mr-2 text-red-400"></i>
                        <span>Made with love</span>
                    </div>
                    <div class="text-xs text-gray-500 flex items-center">
                        <i class="fas fa-server mr-2 text-green-400"></i>
                        <span>99.9% Uptime</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>

{% include 'components/support.html' %}

<div id="loginModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal('loginModal')">&times;</span>
        <form method="POST" action="{{ url_for('auth.login') }}" class="space-y-6">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold font-heading text-white mb-2">Welcome Back</h2>
                <p class="text-gray-400">Sign in to your account to continue</p>
            </div>

            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            {% for category, message in messages %}
            {% if 'login' in message.lower() or 'invalid' in message.lower() or 'password' in message.lower() or 'successful' in message.lower() %}
            <div class="flash-message flash-{{ 'success' if category == 'success' else 'error' }}">
                <div class="flex items-center">
                    {% if category == 'success' %}
                    <i class="fas fa-check-circle mr-3"></i>
                    {% elif category == 'error' %}
                    <i class="fas fa-exclamation-circle mr-3"></i>
                    {% else %}
                    <i class="fas fa-info-circle mr-3"></i>
                    {% endif %}
                    <span>{{ message }}</span>
                </div>
            </div>
            {% endif %}
            {% endfor %}
            {% endif %}
            {% endwith %}

            <div class="space-y-4">
                <div>
                    <label for="username_or_email" class="block text-sm font-medium text-gray-300 mb-2">Username or Email</label>
                    <input type="text" name="username_or_email" class="form-input" placeholder="Enter your username or email" required>
                </div>

                <div class="relative">
                    <label for="password" class="block text-sm font-medium text-gray-300 mb-2">Password</label>
                    <input type="password" name="password" class="form-input pr-12" placeholder="Enter your password" id="loginPassword" required>
                    <span class="password-toggle" onclick="togglePassword('loginPassword')">
                            <i class="fas fa-eye"></i>
                        </span>
                </div>

                <div class="flex items-center justify-between">
                    <a href="#" onclick="closeModal('loginModal'); openForgotPasswordModal(); return false;" class="text-sm text-blue-400 hover:text-blue-300 transition-colors">
                        Forgot password?
                    </a>
                    <a href="{{ url_for('support.contact') }}" class="text-sm text-gray-400 hover:text-white transition-colors">
                        Contact support
                    </a>
                </div>
            </div>

            <button type="submit" class="btn btn-primary w-full">
                <i class="fas fa-sign-in-alt mr-2"></i>
                Sign In
            </button>

            <div class="form-switch">
                Don't have an account? <a href="#" onclick="closeModal('loginModal'); openSignupModal(); return false;">Sign up</a>
            </div>
        </form>
    </div>
</div>

<div id="signupModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal('signupModal')">&times;</span>
        <form method="POST" action="{{ url_for('auth.signup') }}" class="space-y-4">
            <div class="text-center mb-6">
                <h2 class="text-2xl font-bold font-heading text-white mb-1">Create Account</h2>
                <p class="text-gray-400 text-sm">Join our marketplace and start selling</p>
            </div>

            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            {% for category, message in messages %}
            {% if 'reserved username' in message.lower() or 'account created' in message.lower() or 'already exists' in message.lower() or 'already registered' in message.lower() or 'already being used' in message.lower() or 'required' in message.lower() or 'match' in message.lower() %}
            <div class="flash-message flash-{{ 'success' if category == 'success' else 'error' }}">
                <div class="flex items-center">
                    {% if category == 'success' %}
                    <i class="fas fa-check-circle mr-3"></i>
                    {% elif category == 'error' %}
                    <i class="fas fa-exclamation-circle mr-3"></i>
                    {% else %}
                    <i class="fas fa-info-circle mr-3"></i>
                    {% endif %}
                    <span>{{ message }}</span>
                </div>
            </div>
            {% endif %}
            {% endfor %}
            {% endif %}
            {% endwith %}

            {% if session.get('signup_success') %}
            <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4">
                <div class="flex items-center">
                    <i class="fas fa-envelope-open-text mr-3 text-green-500"></i>
                    <div>
                        <strong>Account Created Successfully!</strong>
                        <p class="text-sm mt-1">
                            We've sent a verification email to <strong>{{ session.get('signup_email') }}</strong>.
                            Please check your inbox and spam folder to verify your account.
                        </p>
                        <div class="mt-3 space-y-2">
                            <a href="#" class="text-green-600 hover:text-green-800 text-sm underline">
                                <i class="fas fa-paper-plane mr-1"></i>Resend verification email
                            </a>
                            <br>
                            <a href="{{ url_for('dashboard.home') }}" class="text-green-600 hover:text-green-800 text-sm underline">
                                <i class="fas fa-home mr-1"></i>Continue to homepage
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}

            <div class="space-y-3">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-3">
                    <div>
                        <label for="username" class="block text-sm font-medium text-gray-300 mb-1">Username</label>
                        <input type="text" name="username" class="form-input" placeholder="Username" value="{{ session.get('signup_form_data', {}).get('username', '') }}" required>
                    </div>
                    <div>
                        <label for="shop_name" class="block text-sm font-medium text-gray-300 mb-1">Shop Name</label>
                        <input type="text" name="shop_name" class="form-input" placeholder="Shop name" value="{{ session.get('signup_form_data', {}).get('shop_name', '') }}" required>
                    </div>
                </div>

                <div>
                    <label for="email" class="block text-sm font-medium text-gray-300 mb-1">Email Address</label>
                    <input type="email" name="email" class="form-input" placeholder="Your email" value="{{ session.get('signup_form_data', {}).get('email', '') }}" required>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-3">
                    <div class="relative">
                        <label for="password" class="block text-sm font-medium text-gray-300 mb-1">Password</label>
                        <input type="password" name="password" class="form-input pr-12" placeholder="Password" id="signupPassword" required>
                        <span class="password-toggle" onclick="togglePassword('signupPassword')">
                                <i class="fas fa-eye"></i>
                            </span>
                    </div>

                    <div class="relative">
                        <label for="confirm_password" class="block text-sm font-medium text-gray-300 mb-1">Confirm Password</label>
                        <input type="password" name="confirm_password" class="form-input pr-12" placeholder="Confirm" id="confirmPassword" required>
                        <span class="password-toggle" onclick="togglePassword('confirmPassword')">
                                <i class="fas fa-eye"></i>
                            </span>
                    </div>
                </div>

                <div class="flex items-center">
                    <input type="checkbox" class="checkbox" id="agreeTerms" name="agree_terms" required>
                    <label class="checkbox-label ml-2 text-sm" for="agreeTerms">
                        I agree to the <a href="{{ url_for('terms.service') }}" class="text-blue-400 hover:text-blue-300">Terms</a> and <a href="{{ url_for('privacy.policy') }}" class="text-blue-400 hover:text-blue-300">Privacy Policy</a>
                    </label>
                </div>
            </div>

            <!-- Cloudflare Turnstile Captcha -->
            <div class="flex justify-center">
                <div id="cf-turnstile-signup" 
                     class="cf-turnstile" 
                     data-sitekey="{{ config.CLOUDFLARE_SITE_KEY }}"
                     data-callback="onSignupCaptchaSuccess"
                     data-error-callback="onSignupCaptchaError"
                     data-theme="dark"></div>
            </div>

            <button type="submit" id="signupSubmitBtn" disabled class="btn btn-primary w-full">
                <i class="fas fa-user-plus mr-2"></i>
                Create Account
            </button>

            <div class="form-switch text-center">
                Already have an account? <a href="#" onclick="closeModal('signupModal'); openLoginModal(); return false;">Sign in</a>
            </div>

            <div class="text-center mt-4">
                <a href="#" class="text-blue-400 hover:text-blue-300 text-sm">
                    <i class="fas fa-envelope me-1"></i>Need to resend verification email?
                </a>
            </div>
        </form>
    </div>
</div>

<div id="forgotPasswordModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal('forgotPasswordModal')">&times;</span>
        <form method="POST" action="{{ url_for('auth.forgot_password') }}" class="space-y-6">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold font-heading text-white mb-2">Forgot Password</h2>
                <p class="text-gray-400">Enter your email to receive a reset link.</p>
            </div>

            <div class="space-y-4">
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-300 mb-2">Email Address</label>
                    <input type="email" name="email" class="form-input" placeholder="Enter your registered email" required>
                </div>
            </div>

            <button type="submit" class="btn btn-primary w-full">
                <i class="fas fa-paper-plane mr-2"></i>
                Send Reset Link
            </button>

            <div class="form-switch">
                Remembered your password? <a href="#" onclick="closeModal('forgotPasswordModal'); openLoginModal(); return false;">Sign in</a>
            </div>
        </form>
    </div>
</div>

<script>
    // Captcha callback functions
    let signupCaptchaToken = null;

    function onSignupCaptchaSuccess(token) {
        signupCaptchaToken = token;
        const submitBtn = document.getElementById('signupSubmitBtn');
        submitBtn.disabled = false;
        submitBtn.classList.remove('opacity-50');
    }

    function onSignupCaptchaError() {
        signupCaptchaToken = null;
        const submitBtn = document.getElementById('signupSubmitBtn');
        submitBtn.disabled = true;
        submitBtn.classList.add('opacity-50');
    }

    // Store input functionality - Updated for both mobile and desktop
    document.addEventListener('DOMContentLoaded', function() {
        const currentDomain = '{{ current_domain }}';

        // Handle both mobile and desktop inputs
        function setupStoreInput(suffix) {
            const storeInput = document.getElementById(`storeId-${suffix}`);
            const urlPreview = document.getElementById(`urlPreview-${suffix}`);

            if (!storeInput || !urlPreview) return;

            storeInput.addEventListener('input', function() {
                const storeId = this.value.toLowerCase().replace(/[^a-z0-9-]/g, '');
                if (storeId) {
                    urlPreview.textContent = `${currentDomain}/${storeId}`;
                    urlPreview.classList.remove('text-gray-400');
                    urlPreview.classList.add('text-blue-300');
                } else {
                    urlPreview.textContent = `${currentDomain}/example`;
                    urlPreview.classList.remove('text-blue-300');
                    urlPreview.classList.add('text-gray-400');
                }
            });

            // Enter key support
            storeInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    visitStore(suffix);
                }
            });
        }

        // Setup both inputs
        setupStoreInput('mobile');
        setupStoreInput('desktop');
    });

    // Mobile menu functionality
    function toggleMobileMenu() {
        const mobileMenu = document.getElementById('mobileMenu');
        mobileMenu.classList.toggle('hidden');
    }

    // Store input functionality
    const currentDomain = '{{ current_domain }}';

    async function visitStore(version = 'desktop') {
        const storeInput = document.getElementById(`storeId-${version}`);
        const storeId = storeInput.value.toLowerCase().replace(/[^a-z0-9-]/g, '');

        if (!storeId) {
            showStoreMessage('Enter store username', 'error', version);
            return;
        }

        // Show loading state
        const visitBtn = document.querySelector(`.visit-btn-${version}`);
        const originalText = visitBtn.innerHTML;
        visitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Checking...';
        visitBtn.disabled = true;

        try {
            const response = await fetch('/api/check-store', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ username: storeId })
            });

            const data = await response.json();

            if (data.success) {
                // Show success message with shop name
                showStoreMessage(`Found "${data.shop_name}"!`, 'success', version);
                setTimeout(() => {
                    window.location.href = data.redirect_url;
                }, 1000);
            } else {
                showStoreMessage(data.message, 'error', version);
            }
        } catch (error) {
            console.error('Error:', error);
            showStoreMessage('Connection error', 'error', version);
        } finally {
            // Reset button state
            setTimeout(() => {
                visitBtn.innerHTML = originalText;
                visitBtn.disabled = false;
            }, 1500);
        }
    }

    function showStoreMessage(message, type, version) {
        // Remove existing message for this version
        const existingMessage = document.querySelector(`.store-message-${version}`);
        if (existingMessage) {
            existingMessage.remove();
        }

        // Create new message with enhanced design
        const messageDiv = document.createElement('div');
        messageDiv.className = `store-message store-message-${version} ${type === 'success' ? 'success' : 'error'}`;
        
        const iconClass = type === 'success' ? 'fa-check-circle' : 'fa-exclamation-triangle';
        const iconBgColor = type === 'success' ? 'bg-green-500/20' : 'bg-red-500/20';
        const iconTextColor = type === 'success' ? 'text-green-400' : 'text-red-400';
        
        messageDiv.innerHTML = `
        <div class="flex items-center">
            <div class="w-8 h-8 ${iconBgColor} rounded-full flex items-center justify-center mr-3 flex-shrink-0">
                <i class="fas ${iconClass} ${iconTextColor} text-sm"></i>
            </div>
            <div class="flex-1">
                <div class="font-medium">${message}</div>
                ${type === 'success' ? '<div class="text-xs opacity-75 mt-0.5">Redirecting...</div>' : ''}
            </div>
        </div>
    `;

        // Insert message above the visit button
        const visitBtn = document.querySelector(`.visit-btn-${version}`);
        if (visitBtn && visitBtn.parentNode) {
            visitBtn.parentNode.insertBefore(messageDiv, visitBtn);
        }

        // Auto-remove message after 3 seconds
        setTimeout(() => {
            if (messageDiv.parentNode) {
                messageDiv.remove();
            }
        }, 3000);
    }

    // FAQ Collapsible functionality
    document.querySelectorAll('.faq-question').forEach(button => {
        button.addEventListener('click', () => {
            const faqItem = button.closest('.faq-item');
            const answer = faqItem.querySelector('.faq-answer');
            const chevron = button.querySelector('i');
            
            // Toggle answer visibility
            answer.classList.toggle('hidden');
            
            // Rotate chevron
            if (answer.classList.contains('hidden')) {
                chevron.style.transform = 'rotate(0deg)';
            } else {
                chevron.style.transform = 'rotate(180deg)';
            }
        });
    });

    // Smooth scrolling
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                // Close mobile menu if open
                document.getElementById('mobileMenu').classList.add('hidden');

                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // Modal functionality
    function openLoginModal() {
        document.getElementById('loginModal').classList.add('show');
        document.body.style.overflow = 'hidden';
    }

    function openSignupModal() {
        document.getElementById('signupModal').classList.add('show');
        document.body.style.overflow = 'hidden';
    }

    function openForgotPasswordModal() {
        document.getElementById('forgotPasswordModal').classList.add('show');
        document.body.style.overflow = 'hidden';
    }

    function closeModal(modalId) {
        document.getElementById(modalId).classList.remove('show');
        document.body.style.overflow = 'auto';
    }

    function togglePassword(inputId) {
        const input = document.getElementById(inputId);
        const icon = input.nextElementSibling.querySelector('i');

        if (input.type === 'password') {
            input.type = 'text';
            icon.classList.remove('fa-eye');
            icon.classList.add('fa-eye-slash');
        } else {
            input.type = 'password';
            icon.classList.remove('fa-eye-slash');
            icon.classList.add('fa-eye');
        }
    }

    // Close modals when clicking outside
    window.onclick = function(event) {
        if (event.target.classList.contains('modal')) {
            event.target.classList.remove('show');
            document.body.style.overflow = 'auto';
        }
    }

    // Close modals with Escape key
    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
            document.querySelectorAll('.modal.show').forEach(modal => {
                modal.classList.remove('show');
            });
            document.body.style.overflow = 'auto';
        }
    });
</script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const loginHasError = !!document.querySelector('#loginModal .flash-error');
        const signupHasError = !!document.querySelector('#signupModal .flash-error');

        // Check if there's signup form data in session (indicating a reserved username or email error)
        const hasSignupFormData = {{ 'true' if session.get('signup_form_data') else 'false' }};

        // Check if there's signup success in session
        const hasSignupSuccess = {{ 'true' if session.get('signup_success') else 'false' }};

        // Priority: signup success first, then signup errors, then login errors
        if (hasSignupSuccess) {
            openSignupModal();
            // Clear success state after showing
            fetch('/clear-signup-success', { method: 'POST' });
        } else if (signupHasError || hasSignupFormData) {
            openSignupModal();
        } else if (loginHasError) {
            openLoginModal();
        }

        // Clear signup form data from session after displaying
        if (hasSignupFormData) {
            // Send a request to clear the session data
            fetch('/clear-signup-form-data', { method: 'POST' });
        }

        // Add signup form validation
        const signupForm = document.querySelector('#signupModal form');
        if (signupForm) {
            signupForm.addEventListener('submit', function(e) {
                if (!signupCaptchaToken) {
                    e.preventDefault();
                    alert('Please complete the captcha verification.');
                    return false;
                }
                
                // Add captcha token to form
                const captchaInput = document.createElement('input');
                captchaInput.type = 'hidden';
                captchaInput.name = 'captcha_token';
                captchaInput.value = signupCaptchaToken;
                this.appendChild(captchaInput);
            });
        }
    });
</script>
</body>
</html>