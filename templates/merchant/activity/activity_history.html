{% extends "_base/base.html" %}

{% block title %}Activity Overview | ShopsyPro{% endblock %}

{% block content %}
<section id="activity-history" class="min-h-screen p-6">
  <div class="mb-6 flex justify-between items-center">
    <div>
      <h2 class="text-2xl font-bold text-white mb-4">Activity History</h2>
      <p class="text-gray-400">Complete history of all activities in your shop.</p>
    </div>
    <a href="/dashboard" class="text-sm text-white bg-gray-700 px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors flex items-center">
      <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
      </svg>
      Back to Dashboard
    </a>
  </div>

  <!-- Activity List -->
  <div class="bg-gray-800 rounded-lg border border-gray-700/30 overflow-hidden">
    <div class="p-6 border-b border-gray-700/30">
      <div class="flex justify-between items-center">
        <h3 class="text-lg font-semibold text-white">All Activities</h3>
        <div class="text-sm text-gray-400">
          Total: <span class="font-semibold text-white">{{ total_activities }}</span> activities
        </div>
      </div>
    </div>

    {% if activities %}
    <div class="divide-y divide-gray-700/30">
      {% for activity in activities %}
      <div class="p-6 hover:bg-gray-700/20 transition-colors">
        <div class="flex items-start">
          <div class="bg-{{ activity.action_type|activity_color }}-500/20 p-3 rounded-lg mr-4">
            <svg class="w-6 h-6 text-{{ activity.action_type|activity_color }}-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="{{ activity.item_type|activity_icon }}"></path>
            </svg>
          </div>
          <div class="flex-1">
            <div class="flex justify-between">
              <p class="text-white font-medium">{{ activity.action_type|title }} {{ activity.item_type }}</p>
              <p class="text-gray-500 text-sm" title="{{ activity.timestamp|format_datetime }}">
                {{ activity.timestamp|time_ago }}
              </p>
            </div>
            <p class="text-gray-400 mt-1">{{ activity.details or "No details provided" }}</p>
            {% if activity.item_id %}
            <p class="text-gray-500 text-xs mt-2">ID: {{ activity.item_id }}</p>
            {% endif %}
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    <!-- Pagination -->
    {% if total_pages > 1 %}
    <div class="px-6 py-4 border-t border-gray-700/30 flex justify-between items-center">
      <div class="text-sm text-gray-400">
        Showing page {{ current_page }} of {{ total_pages }}
      </div>
      <div class="flex space-x-2">
        {% if current_page > 1 %}
                        <a href="{{ url_for('dashboard.activity_history', page=current_page-1) }}" class="px-4 py-2 bg-gray-700 text-white text-sm rounded-md hover:bg-gray-600 transition-colors">
          Previous
        </a>
        {% endif %}
        
        {% if current_page < total_pages %}
                        <a href="{{ url_for('dashboard.activity_history', page=current_page+1) }}" class="px-4 py-2 bg-gray-700 text-white text-sm rounded-md hover:bg-gray-600 transition-colors">
          Next
        </a>
        {% endif %}
      </div>
    </div>
    {% endif %}
    
    {% else %}
    <div class="p-6 text-center text-gray-400">
      <p>No activities found.</p>
    </div>
    {% endif %}
  </div>
</section>
{% endblock %} 